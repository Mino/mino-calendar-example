var BasicVal=function(){"function"==typeof require&&(FieldVal=require("fieldval")),Array.prototype.indexOf||(Array.prototype.indexOf=function(r,e){var n;if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if(0===o)return-1;var i=+e||0;if(1/0===Math.abs(i)&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);o>n;){if(n in t&&t[n]===r)return n;n++}return-1});var r={errors:{too_short:function(r){return{error:100,error_message:"Length is less than "+r}},too_long:function(r){return{error:101,error_message:"Length is greater than "+r}},too_small:function(r){return{error:102,error_message:"Value is less than "+r}},too_large:function(r){return{error:103,error_message:"Value is greater than "+r}},not_in_list:function(){return{error:104,error_message:"Value is not a valid choice"}},cannot_be_empty:function(){return{error:105,error_message:"Value cannot be empty."}},no_prefix:function(r){return{error:106,error_message:"Value does not have prefix: "+r}},invalid_email:function(){return{error:107,error_message:"Invalid email address format."}},invalid_url:function(){return{error:108,error_message:"Invalid url format."}},incorrect_length:function(r){return{error:109,error_message:"Length is not equal to "+r}},no_suffix:function(r){return{error:110,error_message:"Value does not have suffix: "+r}},not_equal:function(r){return{error:113,error_message:"Not equal to "+r+"."}},no_valid_option:function(){return{error:115,error_message:"None of the options were valid."}},contains_whitespace:function(){return{error:116,error_message:"Contains whitespace."}},must_start_with_letter:function(){return{error:117,error_message:"Must start with a letter."}},value_in_list:function(){return{error:104,error_message:"Value not allowed"}}},equal_to:function(e,n){var t=function(t){return t!==e?FieldVal.create_error(r.errors.not_equal,n,e):void 0};return n?(n.check=t,n):{check:t}},merge_required_and_flags:function(r,e){return"object"==typeof r?e=r:(e||(e={}),e.required=r),e},integer:function(e,n){return FieldVal.type("integer",r.merge_required_and_flags(e,n))},number:function(e,n){return FieldVal.type("number",r.merge_required_and_flags(e,n))},array:function(e,n){return FieldVal.type("array",r.merge_required_and_flags(e,n))},object:function(e,n){return FieldVal.type("object",r.merge_required_and_flags(e,n))},"float":function(e,n){return FieldVal.type("float",r.merge_required_and_flags(e,n))},"boolean":function(e,n){return FieldVal.type("boolean",r.merge_required_and_flags(e,n))},string:function(e,n){n=r.merge_required_and_flags(e,n);var t=function(r,t){var o=FieldVal.type("string",n);"object"==typeof o&&(o=o.check);var i=o(r,t);return i?i:(n&&n.trim===!1||(r=r.trim()),0===r.length?e||void 0===e?FieldVal.REQUIRED_ERROR:FieldVal.NOT_REQUIRED_BUT_MISSING:void 0)};return n?(n.check=t,n):{check:t}},length:function(e,n){var t=function(t){return t.length!==e?FieldVal.create_error(r.errors.incorrect_length,n,e):void 0};return n?(n.check=t,n):{check:t}},min_length:function(e,n){var t=function(t){return t.length<e?FieldVal.create_error(r.errors.too_short,n,e):void 0};return n?(n.check=t,n):{check:t}},max_length:function(e,n){var t=function(t){return t.length>e?FieldVal.create_error(r.errors.too_long,n,e):void 0};return n?(n.check=t,n):{check:t}},no_whitespace:function(e){var n=function(n){return/\s/.test(n)?FieldVal.create_error(r.errors.contains_whitespace,e,max_len):void 0};return e?(e.check=n,e):{check:n}},minimum:function(e,n){var t=function(t){return e>t?FieldVal.create_error(r.errors.too_small,n,e):void 0};return n?(n.check=t,n):{check:t}},maximum:function(e,n){var t=function(t){return t>e?FieldVal.create_error(r.errors.too_large,n,e):void 0};return n?(n.check=t,n):{check:t}},range:function(e,n,t){var o=function(o){return e>o?FieldVal.create_error(r.errors.too_small,t,e):o>n?FieldVal.create_error(r.errors.too_large,t,n):void 0};return t?(t.check=o,t):{check:o}},one_of:function(e,n){var t=[];if("[object Array]"===Object.prototype.toString.call(e))for(var o=0;o<e.length;o++){var i=e[o];t.push("object"==typeof i?i[0]:i)}else for(var a in e)t.push(a);var l=function(e){return-1===t.indexOf(e)?FieldVal.create_error(r.errors.not_in_list,n):void 0};return n?(n.check=l,n):{check:l}},not_one_of:function(e,n){var t=[];if("[object Array]"===Object.prototype.toString.call(e))for(var o=0;o<e.length;o++){var i=e[o];t.push("object"==typeof i?i[0]:i)}else for(var a in e)t.push(a);var l=function(e){return-1!==t.indexOf(e)?FieldVal.create_error(r.errors.value_in_list,n):void 0};return n?(n.check=l,n):{check:l}},not_empty:function(e,n){var t=function(t){if(e){if(0===t.trim().length)return FieldVal.create_error(r.errors.cannot_be_empty,n)}else if(0===t.length)return FieldVal.create_error(r.errors.cannot_be_empty,n)};return n?(n.check=t,n):{check:t}},prefix:function(e,n){var t=function(t){return t.length>=e.length?t.substring(0,e.length)!=e?FieldVal.create_error(r.errors.no_prefix,n,e):void 0:FieldVal.create_error(r.errors.no_prefix,n,e)};return n?(n.check=t,n):{check:t}},start_with_letter:function(e){var n=function(n){if(!(n.length>0))return FieldVal.create_error(r.errors.must_start_with_letter,e);var t=n.charCodeAt(0);return t>=65&&90>=t||t>=97&&122>=t?void 0:FieldVal.create_error(r.errors.must_start_with_letter,e)};return e?(e.check=n,e):{check:n}},suffix:function(e,n){var t=function(t){return t.length>=e.length?t.substring(t.length-e.length,t.length)!=e?FieldVal.create_error(r.errors.no_suffix,n,e):void 0:FieldVal.create_error(r.errors.no_suffix,n,e)};return n?(n.check=t,n):{check:t}},each:function(r,e){var n=function(e){for(var n=new FieldVal(null),t=0;t<e.length;t++){var o=e[t],i=r(o,t);i===FieldVal.REQUIRED_ERROR?n.missing(""+t):null!=i&&n.invalid(""+t,i)}var a=n.end();return null!=a?a:void 0};return e?(e.check=n,e):{check:n}},each_async:function(r,e){var n=function(r,e,n){new FieldVal(null)};return e?(e.check=n,e):{check:n}},multiple:function(e,n){e=e||[],0===e.length&&console.error("BasicVal.multiple called without possibles.");var t=function(t,o){for(var i=0;i<e.length;i++){var a,l=e[i],c=FieldVal.use_checks(t,l,null,null,function(r){a=r});if(!c)return void 0!==a&&o(a),null}return FieldVal.create_error(r.errors.no_valid_option,n)};return n?(n.check=t,n):{check:t}},multiple_async:function(e,n){if(e=e||[],0===e.length)return void console.error("BasicVal.multiple_async called without possibles.");var t,o=function(o,i,a){var l,c=function(r){l=r},u=0,s=function(){if(u++,u>e.length)return void a(FieldVal.create_error(r.errors.no_valid_option,n));var t=e[u-1];FieldVal.use_checks(o,t,{field_name:null,validator:null,emit:c},function(r){void 0===r?a(void 0):s()})};return s(),t};return n?(n.check=o,n):{check:o}},email:function(e){var n=function(n){var t=r.email_regex;return t.test(n)?void 0:FieldVal.create_error(r.errors.invalid_email,e)};return e?(e.check=n,e):{check:n}},url:function(e){var n=function(n){var t=r.url_regex;return t.test(n)?void 0:FieldVal.create_error(r.errors.invalid_url,e)};return e?(e.check=n,e):{check:n}}};return r.email_regex=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,r.url_regex=/^(https?):\/\/(((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))|((([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])))(:[1-9][0-9]+)?(\/)?([\/?].+)?$/,r}.call();"undefined"!=typeof module&&(module.exports=BasicVal);